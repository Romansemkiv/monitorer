(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(f.length)f.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={app:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},4678:function(e,t,i){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return i(t)}function n(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id="4678"},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),s=(i("d3b7"),i("bc3a")),n=i.n(s),r=i("a1bc"),o=i.n(r);n.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).baseURL||Object({NODE_ENV:"production",BASE_URL:"/"}).apiUrl||o.a.APIServer;var c={},l=n.a.create(c);l.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=l,window.axios=l,Object.defineProperties(e.prototype,{axios:{get:function(){return l}},$axios:{get:function(){return l}}})},a["a"].use(Plugin);Plugin;var d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("vue-headful",{attrs:{title:"Monitorer"}}),i("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("v-list",{attrs:{dense:""}},[i("v-list-item",{on:{click:function(t){return e.changeRoute("Scenes")}}},[i("v-list-item-action",[i("v-icon",{attrs:{large:""}},[e._v("mdi-cards-variant")])],1),i("v-list-item-content",[i("v-list-item-title",{staticClass:"subtitle-1"},[e._v("Сцени")])],1)],1),i("v-list-item",{on:{click:function(t){return e.changeRoute("Devices")}}},[i("v-list-item-action",[i("v-icon",{attrs:{large:""}},[e._v("mdi-chip")])],1),i("v-list-item-content",[i("v-list-item-title",{staticClass:"subtitle-1"},[e._v("Пристрої")])],1)],1),i("v-list-item",{on:{click:function(t){return e.changeRoute("Records")}}},[i("v-list-item-action",[i("v-icon",{attrs:{large:""}},[e._v("mdi-format-list-bulleted-square")])],1),i("v-list-item-content",[i("v-list-item-title",{staticClass:"subtitle-1"},[e._v("Логи")])],1)],1)],1)],1),i("v-app-bar",{attrs:{app:"","clipped-left":""}},[i("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),i("v-toolbar-title",[e._v("Monitorer")])],1),i("v-content",[i("router-view")],1),i("v-footer",{attrs:{app:""}},[i("span",[e._v("Семенишин Олег © 2019")])])],1)},u=[],f={data:function(){return{drawer:null}},created:function(){},sockets:{connect:function(){this.isConnected=!0},disconnect:function(){this.isConnected=!1},messageChannel:function(e){this.socketMessage=e}},methods:{changeRoute:function(e){return this.$router.push({name:e})}}},v=f,m=i("2877"),p=i("6544"),b=i.n(p),h=i("7496"),x=i("40dc"),g=i("5bc1"),j=i("a75b"),I=i("553a"),_=i("132d"),k=i("8860"),V=i("da13"),y=i("1800"),w=i("5d23"),C=i("f774"),D=i("2a7f"),O=Object(m["a"])(v,d,u,!1,null,null,null),S=O.exports;b()(O,{VApp:h["a"],VAppBar:x["a"],VAppBarNavIcon:g["a"],VContent:j["a"],VFooter:I["a"],VIcon:_["a"],VList:k["a"],VListItem:V["a"],VListItemAction:y["a"],VListItemContent:w["b"],VListItemTitle:w["d"],VNavigationDrawer:C["a"],VToolbarTitle:D["a"]});var $=i("8c4f"),N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scene"},[i("vue-headful",{attrs:{title:"Monitorer - Сцени"}}),i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[e.scenes.length>0?i("v-row",e._l(e.scenes,(function(t,a){return i("v-col",{key:t._id,attrs:{md:"6",sm:"12"}},[i("v-card",{staticClass:"mx-auto"},[i("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Видалити назавжди?")]),i("v-card-text",[i("h2",[e._v("Модуль: "+e._s(e.editedItem.title))]),i("h3",[e._v("Опис: "+e._s(e.editedItem.description))])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.close}},[e._v("Відміна")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.deleteItem}},[e._v("Видалити")])],1)],1)],1),i("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.editedIndex>-1?"Редагувати сцену":"Додати сцену"))])]),i("v-card-text",[i("v-form",{ref:"form",refInFor:!0},[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:"Назва"},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:"Опис"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-select",{attrs:{items:e.devices,"item-text":"title","return-object":"",label:"Виберіть пристрій","single-line":""},on:{change:e.selectDevice},model:{value:e.editedItem.device,callback:function(t){e.$set(e.editedItem,"device",t)},expression:"editedItem.device"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"900px"}},[i("v-list-item-group",{attrs:{multiple:""}},e._l(e.editedItem.params,(function(t){return i("v-list-item",{key:t.prop,attrs:{"two-line":""}},[[i("v-list-item-action",[(e.editedIndex,i("v-checkbox",{attrs:{color:"primary"},on:{change:function(e){t.selected}},model:{value:t.selected,callback:function(i){e.$set(t,"selected",i)},expression:"param.selected"}}))],1),i("v-list-item-content",[i("v-list-item-action-text",{staticClass:"mr-3 subtitle-1"},[e._v("Параметр: "+e._s(t.prop))]),i("v-row",[i("v-col",[i("v-text-field",{attrs:{label:"Назва  параметру"},model:{value:t.title,callback:function(i){e.$set(t,"title",i)},expression:"param.title"}})],1),i("v-col",[i("v-text-field",{attrs:{label:"Cуфікс"},model:{value:t.suffix,callback:function(i){e.$set(t,"suffix",i)},expression:"param.suffix"}})],1),i("v-col",[i("v-text-field",{attrs:{label:"Критичне значення"},model:{value:t.criticalVal,callback:function(i){e.$set(t,"criticalVal",i)},expression:"param.criticalVal"}})],1)],1)],1)]],2)})),1)],1)],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":"",label:"Визначати аномалії ?"},model:{value:e.editedItem.options.useIrwin,callback:function(t){e.$set(e.editedItem.options,"useIrwin",t)},expression:"editedItem.options.useIrwin"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-text-field",{attrs:{disabled:!e.editedItem.options.useIrwin,label:"Введіть кількість значень"},model:{value:e.editedItem.options.irwinNum,callback:function(t){e.$set(e.editedItem.options,"irwinNum",t)},expression:"editedItem.options.irwinNum"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":"",label:"Графіки?"},model:{value:e.editedItem.options.bar,callback:function(t){e.$set(e.editedItem.options,"bar",t)},expression:"editedItem.options.bar"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:!e.editedItem.options.bar,"hide-details":"",label:"Розділені графіки"},model:{value:e.editedItem.options.splitted,callback:function(t){e.$set(e.editedItem.options,"splitted",t)},expression:"editedItem.options.splitted"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":"",label:"Останнє значення"},model:{value:e.editedItem.options.lastValue,callback:function(t){e.$set(e.editedItem.options,"lastValue",t)},expression:"editedItem.options.lastValue"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-row",{attrs:{align:"center"}},[i("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:!e.editedItem.options.bar,"hide-details":""},model:{value:e.editedItem.options.limit,callback:function(t){e.$set(e.editedItem.options,"limit",t)},expression:"editedItem.options.limit"}}),i("v-text-field",{attrs:{disabled:!e.editedItem.options.limit,label:"Введіть кількість значень"},model:{value:e.editedItem.options.limitValue,callback:function(t){e.$set(e.editedItem.options,"limitValue",t)},expression:"editedItem.options.limitValue"}})],1)],1)],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.close()}}},[e._v("Відміна")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save()}}},[e._v("Зберегти")])],1)],1)],1),i("v-list-item",{attrs:{"two-line":""}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"headline"},[e._v(e._s(t.title))]),i("v-list-item-subtitle",[e._v(e._s(t.description))])],1)],1),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[e._v("mdi-chip")])],1),i("v-list-item-subtitle",[e._v(e._s(t.device.title))])],1),t.options.bar?i("v-card-text",[i("v-row",{attrs:{"no-gutters":"",align:"center"}},[t.options.splitted?i("v-col",e._l(t.params,(function(a,s){return i("div",{key:a.prop,attrs:{md:"6",sm:"12"}},[i("apexchart",{attrs:{type:"area",options:e.options(a),series:e.SplitSeries(a,t)}})],1)})),0):i("v-col",[i("div",[i("apexchart",{attrs:{type:"area",options:e.options(),series:e.OneSeries(t.params,t)}})],1)])],1)],1):e._e(),t.options.useIrwin?i("span",e._l(t.params,(function(a,s){return i("span",{key:a.prop},[e.finder(t._id,a.prop).abnormalValues.length>0?i("v-card",{staticClass:"mx-2",attrs:{color:"#F9F9F9"}},[i("row",[i("v-card-title",[e._v(" "+e._s(a.title)+", "+e._s(a.suffix)+" "),i("v-spacer"),i("div",{staticClass:"subtitle-2"},[e._v("Аномалії за методом Ірвіна")])],1)],1),i("v-card-text",[i("v-list",{staticClass:"transparent"},e._l(e.finder(t._id,a.prop).abnormalValues,(function(t,a){return i("v-list-item",{key:t},[i("v-list-item-title",[e._v(e._s(a+1)+".")]),i("v-list-item-subtitle",{staticClass:"red--text subtitle-1"},[e._v(e._s(t.value.value))]),i("v-list-item-subtitle",{staticClass:"text-right"},[e._v(e._s(e.$moment(t.value.date).format("DD/MM/YYYY HH:mm")))])],1)})),1)],1)],1):e._e()],1)})),0):e._e(),t.options.lastValue?i("v-card",{staticClass:"mx-2",attrs:{color:"#F9F9F9"}},[i("v-card-title",[e._v(" Останнє значення "),i("v-spacer"),i("div",{staticClass:"subtitle-2"},[e._v(e._s(e.$moment(e.findLastLog(t).createdAt).format("DD MMMM YYYY о HH:mm")))])],1),i("v-card-text",[i("v-list",{staticClass:"transparent"},e._l(t.params,(function(a,s){return i("v-list-item",{key:a.prop},[i("v-list-item-title",[e._v(e._s(a.title)+" ")]),i("v-list-item-subtitle",{class:e.checkForExcess(JSON.parse(e.findLastLog(t).data)[a.prop],a.criticalVal)?"red--text":""},[e._v(e._s(JSON.parse(e.findLastLog(t).data)[a.prop])+" "+e._s(a.suffix))]),i("v-list-item-subtitle",{staticClass:"text-right"},[e._v(e._s(a.criticalVal))])],1)})),1)],1)],1):e._e(),i("v-card-actions",[i("v-icon",{staticClass:"ma-2",on:{click:function(i){return e.editItem(t)}}},[e._v("mdi-pencil")]),i("v-divider",{attrs:{vertical:""}}),i("v-icon",{staticClass:"ma-2",on:{click:function(i){return e.deleter(t)}}},[e._v("mdi-delete-forever")])],1)],1)],1)})),1):e._e(),i("v-btn",{attrs:{fixed:"",fab:"",bottom:"",right:"",large:""},on:{click:function(t){return e.editItem()}}},[i("v-icon",[e._v("mdi-plus")])],1)],1)],1)},L=[],A=(i("a4d3"),i("e01a"),i("7db0"),i("4160"),i("c975"),i("a15b"),i("b0c0"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),i("2ef0")),M=i.n(A),E={name:"scenes",data:function(){return{scenes:[],logs:[],devices:[],editedItem:{title:"",device:"",params:[],options:{lastValue:!1,limit:!1,limitValue:-1,useIrwin:!1,irwinNum:10,splitted:!1,bar:!1},description:""},editedIndex:-1,dialog:!1,deleteDialog:!1,abnormalValues:[]}},created:function(){this.getScenes(),this.getDevices()},methods:{finder:function(e,t){return M.a.find(this.abnormalValues,(function(i){return i.scene==e&&i.param==t}))},findLastLog:function(e){return M.a.find(this.logs,(function(t){return t.externalId==e.device.externalId}))},checkForExcess:function(e,t){if(!t||!e)return!1;var i=t.split(" ")[0],a=t.split(" ")[1];switch(i){case">":if(Number(e)>Number(a))return!0;break;case"<":if(Number(e)<Number(a))return!0;break;case"=":if(Number(e)==Number(a))return!0;break;case">=":if(Number(e)>=Number(a))return!0;break;case"<=":if(Number(e)<=Number(a))return!0;break}},irwinMethod:function(e,t){var i=this;i.$axios.get("record/device/"+e.device.externalId+"/"+e.options.irwinNum).then((function(a){var s=[],n=0;n=(e.options.irwinNum>=0&&e.options.irwinNum,1),M.a.forEach(a.data.records,(function(e){JSON.parse(e.data).hasOwnProperty(t)&&Number(JSON.parse(e.data)[t])?s.push({date:e.createdAt,value:Number(JSON.parse(e.data)[t])}):s.push(0)}));var r=[],o=0,c=0,l=0,d=0,u=0;M.a.forEach(s,(function(e,t){c+=e.value})),o=c/s.length,M.a.forEach(s,(function(e){l+=Math.pow(e.value-o,2)})),d=l/(s.length-1),u=Math.sqrt(d),M.a.forEach(s,(function(e,t){t>0?r.push(Math.abs(s[t].value-s[t-1].value)/u):r.push(0)}));var f=[];M.a.forEach(r,(function(e,t){e>n&&f.push({value:s[t],index:t})})),i.abnormalValues.push({scene:e._id,param:t,abnormalValues:f})}))},selectDevice:function(){var e=this;e.$axios.get("record/device/"+e.editedItem.device.externalId).then((function(t){e.log=t.data.record,M.a.forEach(JSON.parse(e.log.data),(function(t,i){"abnormal"!=i&&(M.a.find(e.editedItem.params,(function(e){return e.prop==i}))||e.editedItem.params.push({title:"",prop:i,criticalVal:"",suffix:"",selected:!1}))}))})).catch((function(e){})).finally((function(){}))},getScenes:function(){var e=this;e.$axios.get("scene").then((function(t){e.scenes=t.data.scenes,M.a.forEach(e.scenes,(function(t){e.getLastLog(t),M.a.forEach(t.params,(function(i){e.irwinMethod(t,i.prop)}))}))})).catch((function(e){})).finally((function(){}))},getDevices:function(){var e=this;e.$axios.get("device").then((function(t){e.devices=t.data.devices})).catch((function(e){})).finally((function(){}))},getLastLog:function(e){var t=this;t.$axios.get("record/device/"+e.device.externalId+"/1").then((function(e){t.logs.push(e.data.records[0])}))},options:function(e){var t=this,a=i("d9f0"),s={chart:{locales:[a],defaultLocale:"ua",stacked:!0,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!1},autoSelected:"zoom"}},plotOptions:{line:{curve:"smooth"}},dataLabels:{enabled:!1},markers:{size:0,style:"full"},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},yaxis:{title:{text:""}},xaxis:{type:"datetime"},tooltip:{shared:!0,y:{formatter:function(e){return e}},x:{formatter:function(e){var i=t.$moment(e).format("DD MMMM YYYY HH:mm"),a=i.split(" ");return a[1]=a[1].charAt(0).toUpperCase()+a[1].substring(1),a.join(" ")}}}};return s.yaxis.title.text=e?e.title:"",s},OneSeries:function(e,t){var i=this;if(t.options.bar){var a=[];return i.$axios.get("record/device/"+t.device.externalId+"/"+t.options.limitValue).then((function(t){M.a.forEach(e,(function(e){var i={data:[]};M.a.forEach(t.data.records,(function(t){i.data.push({y:JSON.parse(t.data)[e.prop],x:t.createdAt})})),a.push({name:e.title,data:i.data})}))})),a}},SplitSeries:function(e,t){var i=this,a=[{data:[],name:""}];return this.scenes.length>0&&t.options.bar&&i.$axios.get("record/device/"+t.device.externalId+"/"+t.options.limitValue).then((function(t){a[0].name=e.title,M.a.forEach(t.data.records,(function(t){a[0].data.push({y:JSON.parse(t.data)[e.prop],x:t.createdAt})}))})),a},editItem:function(e){e?(this.editedIndex=this.scenes.indexOf(e),M.a.forEach(e.params,(function(e){e.selected=!0})),Object.assign(this.editedItem,e),this.dialog=!0):this.dialog=!0},deleteItem:function(){var e=this;this.$axios.delete("scene/"+this.editedItem._id).then((function(t){t.data&&(e.deleteDialog=!1)})),this.$delete(this.scenes,this.editedIndex)},deleter:function(e){Object.assign(this.editedItem,e),this.editedIndex=this.scenes.indexOf(e),this.deleteDialog=!0},close:function(){this.dialog=!1,this.deleteDialog=!1,Object.assign(this.editedItem,{}),this.editedIndex=-1},save:function(){var e=this;if(this.editedIndex>-1){Object.assign(e.scenes[e.editedIndex],e.editedItem);var t=[];M.a.forEach(e.editedItem.params,(function(e,i){e.selected&&t.push({title:e.title,prop:e.prop,criticalVal:e.criticalVal,suffix:e.suffix})})),this.$axios.patch("scene/"+this.editedItem._id,{updateData:[{propName:"title",value:e.editedItem.title},{propName:"options",value:e.editedItem.options},{propName:"params",value:t},{propName:"device",value:e.editedItem.device._id},{propName:"description",value:e.editedItem.description}]}).then((function(t){e.$set(e.scenes,e.editedIndex,t.data.updated)})),e.close()}else{var i=[];M.a.forEach(e.editedItem.params,(function(e){e.selected&&i.push({title:e.title,prop:e.prop,criticalVal:e.criticalVal,suffix:e.suffix})})),this.$axios.post("scene/",{title:e.editedItem.title,options:e.editedItem.options,device:e.editedItem.device._id,description:e.editedItem.description,params:i}).then((function(t){e.scenes.push(t.data.document)})),e.close()}}}},z=E,T=i("8336"),P=i("b0af"),Y=i("99d9"),F=i("ac7c"),R=i("62ad"),J=i("a523"),H=i("169a"),B=i("ce7e"),U=i("4bd4"),q=i("1baa"),G=i("34c3"),W=i("0fd9"),K=i("b974"),Q=i("2fa4"),X=i("8654"),Z=Object(m["a"])(z,N,L,!1,null,null,null),ee=Z.exports;b()(Z,{VBtn:T["a"],VCard:P["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VCheckbox:F["a"],VCol:R["a"],VContainer:J["a"],VDialog:H["a"],VDivider:B["a"],VForm:U["a"],VIcon:_["a"],VList:k["a"],VListItem:V["a"],VListItemAction:y["a"],VListItemActionText:w["a"],VListItemContent:w["b"],VListItemGroup:q["a"],VListItemIcon:G["a"],VListItemSubtitle:w["c"],VListItemTitle:w["d"],VRow:W["a"],VSelect:K["a"],VSpacer:Q["a"],VTextField:X["a"]});var te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modules"},[i("vue-headful",{attrs:{title:"Monitorer - Пристрої"}}),i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{staticClass:"shrink",attrs:{align:"center",justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Видалити назавжди?")]),i("v-card-text",[i("h2",[e._v("Пристрій: "+e._s(e.editedItem.title))]),i("h3",[e._v("Опис: "+e._s(e.editedItem.description))])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.close}},[e._v("Відміна")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.deleteItem}},[e._v("Видалити")])],1)],1)],1),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.editedIndex>-1?"Редагувати пристрій":"Додати пристрій"))])]),i("v-card-text",[i("v-form",{ref:"form"},[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:"Назва"},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:"ІD"},model:{value:e.editedItem.externalId,callback:function(t){e.$set(e.editedItem,"externalId",t)},expression:"editedItem.externalId"}})],1),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:"Опис"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.close()}}},[e._v("Відміна")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save()}}},[e._v("Зберегти")])],1)],1)],1),i("v-col",[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.devices,"items-per-page":-1,"header-props":{sortByText:"Відсортувати"},"footer-props":{itemsPerPageText:"К-сть записів",itemsPerPageAllText:"Всі"}},scopedSlots:e._u([{key:"footer.page-text",fn:function(t){var i=t.pageStart,a=t.pageStop,s=t.itemsLength;return[e._v(e._s(i)+" - "+e._s(a)+" з "+e._s(s))]}},{key:"item.createdAt",fn:function(t){var i=t.item;return[e._v(e._s(e.$moment(i.createdAt).format("DD/MM/YYYY HH:mm")))]}},{key:"item.action",fn:function(t){var a=t.item;return[i("v-icon",{staticClass:"mr-2",on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),i("v-icon",{on:{click:function(t){return e.deleter(a)}}},[e._v("mdi-delete-forever")])]}}])})],1)],1),i("v-btn",{attrs:{fixed:"",fab:"",bottom:"",right:"",light:"",large:""},on:{click:function(t){return e.editItem()}}},[i("v-icon",[e._v("mdi-plus")])],1)],1)],1)},ie=[],ae={name:"modules",data:function(){return{headers:[{text:"Пристрій",align:"left",value:"title"},{text:"Опис",value:"description"},{text:"ID",value:"externalId"},{text:"Дата створення",value:"createdAt"},{text:"Дії",value:"action",sortable:!1}],devices:[],editedItem:{_id:"",title:"",externalId:"",description:""},editedIndex:-1,dialog:!1,deleteDialog:!1}},created:function(){this.getDevices()},methods:{getDevices:function(){var e=this;e.$axios.get("device").then((function(t){e.devices=t.data.devices,console.log(t)})).catch((function(e){console.log(e)})).finally((function(){}))},editItem:function(e){this.editedIndex=this.devices.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(){var e=this;this.$axios.delete("device/"+this.editedItem._id).then((function(t){t.data&&(e.deleteDialog=!1)})),this.$delete(this.devices,this.editedIndex)},deleter:function(e){this.editedItem=Object.assign({},e),this.editedIndex=this.devices.indexOf(e),this.deleteDialog=!0},close:function(){this.dialog=!1,this.deleteDialog=!1,this.editedItem=Object.assign({},{}),this.editedIndex=-1},save:function(){if(this.editedIndex>-1){var e=this;Object.assign(e.devices[e.editedIndex],e.editedItem),this.$axios.patch("device/"+this.editedItem._id,{updateData:[{propName:"title",value:e.editedItem.title},{propName:"externalId",value:e.editedItem.externalId},{propName:"description",value:e.editedItem.description}]}),e.close()}else{var t=this;this.$axios.post("device/",{title:t.editedItem.title,externalId:t.editedItem.externalId,description:t.editedItem.description}).then((function(e){console.log(e),t.devices.push(e.data.document)})),t.close()}}}},se=ae,ne=i("8fea"),re=Object(m["a"])(se,te,ie,!1,null,null,null),oe=re.exports;b()(re,{VBtn:T["a"],VCard:P["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:Y["c"],VCol:R["a"],VContainer:J["a"],VDataTable:ne["a"],VDialog:H["a"],VForm:U["a"],VIcon:_["a"],VRow:W["a"],VSpacer:Q["a"],VTextField:X["a"]});var ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modules"},[i("vue-headful",{attrs:{title:"Monitorer - Логи"}}),i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{staticClass:"shrink",attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-card",[i("v-card-title",[e._v(" Логи "),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Пошук","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.records,"custom-filter":e.filterLogs,search:e.search,"header-props":{sortByText:"Відсортувати"},"footer-props":{itemsPerPageText:"К-сть записів",itemsPerPageAllText:"Всі"}},scopedSlots:e._u([{key:"footer.page-text",fn:function(t){var i=t.pageStart,a=t.pageStop,s=t.itemsLength;return[e._v(e._s(i)+" - "+e._s(a)+" з "+e._s(s))]}},{key:"item.device",fn:function(t){var a=t.item;return[e.findDevice(a.externalId)?i("span",{staticClass:"title text-center"},[e._v(e._s(e.findDevice(a.externalId).title))]):e._e(),i("span",{staticClass:"subtitle-1"},[e._v("(ID: "+e._s(a.externalId)+")")])]}},{key:"item.data",fn:function(t){var i=t.item;return[e._v(e._s(JSON.parse(i.data)))]}},{key:"item.createdAt",fn:function(t){var i=t.item;return[e._v(e._s(e.$moment(i.createdAt).format("DD/MM/YYYY HH:mm")))]}}])})],1)],1)],1)],1)],1)},le=[],de=(i("0d03"),i("25f0"),{name:"records",data:function(){return{headers:[{text:"Пристрій",align:"left",value:"device"},{text:"Дані",value:"data",sortable:!1},{text:"Дата",value:"createdAt"}],records:[],devices:[],search:""}},created:function(){this.getRecords(),this.getDevices()},methods:{getDevices:function(){var e=this;e.$axios.get("device").then((function(t){e.devices=t.data.devices,console.log(t)})).catch((function(e){console.log(e)})).finally((function(){}))},getRecords:function(){var e=this;e.$axios.get("record").then((function(t){e.records=t.data.records,console.log(t)})).catch((function(e){console.log(e)})).finally((function(){}))},findDevice:function(e){return console.log(e),M.a.find(this.devices,(function(t){return t.externalId==e}))},filterLogs:function(e,t,i){return null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().toLowerCase().indexOf(t)}}}),ue=de,fe=Object(m["a"])(ue,ce,le,!1,null,null,null),ve=fe.exports;b()(fe,{VCard:P["a"],VCardTitle:Y["c"],VCol:R["a"],VContainer:J["a"],VDataTable:ne["a"],VRow:W["a"],VSpacer:Q["a"],VTextField:X["a"]}),a["a"].use($["a"]);var me=[{path:"/",name:"Scenes",component:ee},{path:"/devices",name:"Devices",component:oe},{path:"/records",name:"Records",component:ve}],pe=new $["a"]({base:"/",routes:me}),be=pe,he=i("9483");Object(he["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var xe=i("f309");a["a"].use(xe["a"]);var ge=new xe["a"]({}),je=i("c1df"),Ie=i.n(je),_e=i("1321"),ke=i.n(_e),Ve=i("b408"),ye=i.n(Ve),we=i("ec02"),Ce=i.n(we);a["a"].component("vue-headful",Ce.a),a["a"].use(ye.a,o.a.WebSocketServer,{reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3}),a["a"].use(ke.a),a["a"].component("apexchart",ke.a),Ie.a.locale("uk"),a["a"].prototype.$moment=Ie.a,a["a"].config.productionTip=!1,new a["a"]({router:be,vuetify:ge,VueApexCharts:ke.a,render:function(e){return e(S)}}).$mount("#app")},a1bc:function(e,t){e.exports={APIServer:"http://142.93.107.114:4000/api/v1",WebSocketServer:"ws://142.93.107.114:4000/api/v1"}}});
//# sourceMappingURL=app.9c301b3c.js.map